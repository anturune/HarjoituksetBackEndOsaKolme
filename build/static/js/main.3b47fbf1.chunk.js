(this.webpackJsonposat3_9eteenpain=this.webpackJsonposat3_9eteenpain||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(2),a=t(14),r=t.n(a),u=t(3),i=t(4),s=t.n(i),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e){s.a.delete("".concat(l,"/").concat(e))},m=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=(t(38),function(e){var n=e.value,t=e.onChange;return Object(c.jsxs)("div",{children:["filter shown with: ",Object(c.jsx)("input",{value:n,onChange:t})]})}),h=function(e){var n=e.person,t=e.onClick;return Object(c.jsx)("div",{children:Object(c.jsx)(v,{person:n,onClick:t})})},v=function(e){var n=e.person,t=e.onClick;return Object(c.jsxs)("div",{children:[Object(c.jsx)("br",{}),Object(c.jsxs)(c.Fragment,{children:[n.name," ",n.number]}),Object(c.jsx)("button",{onClick:t,children:"Delete"},n.id)]})},O=function(e){var n=e.valueName,t=e.onChangeName,o=e.valueNumber,a=e.onChangeNumber,r=e.onSubmit;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:r,children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:n,onChange:t})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)("input",{value:o,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},g=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},x=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"added",children:n})},p=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)(""),i=Object(u.a)(r,2),s=i[0],l=i[1],v=Object(o.useState)(""),p=Object(u.a)(v,2),C=p[0],N=p[1],w=Object(o.useState)(""),k=Object(u.a)(w,2),S=k[0],P=k[1],y=Object(o.useState)(null),F=Object(u.a)(y,2),L=F[0],T=F[1],D=Object(o.useState)(null),E=Object(u.a)(D,2),I=E[0],J=E[1];Object(o.useEffect)((function(){d().then((function(e){a(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(f,{value:S,onChange:function(e){console.log(e.target.value.toLowerCase()),P(e.target.value.toLowerCase())}}),Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsx)(g,{message:L}),Object(c.jsx)(x,{message:I}),Object(c.jsx)(O,{valueName:s,onChangeName:function(e){console.log(e.target.value),l(e.target.value)},valueNumber:C,onChangeNumber:function(e){console.log(e.target.value),N(e.target.value)},onSubmit:function(e){e.preventDefault();for(var n="",c=function(e){if(console.log("Nimet",t[e]),t[e].name===s&&(n=s,window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?")))){var c={name:s,number:C};m(t[e].id,c).then((function(n){a(t.map((function(c){return c.id!==t[e].id?c:n}))),l(""),N(""),console.log("Success!"),J("Person "+"".concat(c.name)+" succefully changed"),setTimeout((function(){J(null)}),5e3)})).catch((function(e){T("Information of "+"".concat(c.name)+" has already been removed from server"),setTimeout((function(){T(null)}),5e3),console.log("Person update failed")}))}},o=0;o<t.length;o++)c(o);if(""===n){console.log("Uuden luominen, koska ei ollut kannassa");var r={name:s,number:C};j(r).then((function(e){a(t.concat(e)),l(""),N(""),console.log("addName function",e)})),J("Person "+"".concat(r.name)+" succesfully added"),console.log(r.name),setTimeout((function(){J(null)}),5e3)}}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(c.Fragment,{children:t.filter((function(e){return e.name.toLocaleLowerCase().includes("".concat(S))})).map((function(e){return Object(c.jsx)(h,{person:e,onClick:function(){return function(e){var n=e.filteredPerson;window.confirm("Delete "+"".concat(n.name)+"?")&&(b(n.id),console.log("removePerson",n.id),a(t.filter((function(e){return e.name!==n.name}))),T("Person "+"".concat(n.name)+" succesfully removed"),setTimeout((function(){T(null)}),5e3))}({filteredPerson:e})}},e.id)}))}),"...",Object(c.jsxs)("div",{children:["debugNameField: ",s]}),"...",Object(c.jsxs)("div",{children:["debugFilterField: ",S]})]})};r.a.render(Object(c.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3b47fbf1.chunk.js.map